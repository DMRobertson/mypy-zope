from typing import Callable, Optional, Any

from zope.interface import implementer

from twisted.internet import interfaces


@implementer(interfaces.IProtocolFactory, interfaces.ILoggingContext)
class Factory:
    protocol: "Optional[Callable[[], Protocol]]" = None

    @classmethod
    def forProtocol(cls, protocol, *args, **kwargs):
        pass

    def logPrefix(self):
        pass

    def doStart(self):
        pass

    def doStop(self):
        pass

    def startFactory(self):
        pass

    def stopFactory(self):
        pass

    def buildProtocol(self, addr: Any) -> "Optional[Protocol]":
        pass


class BaseProtocol:
    connected = 0
    transport: Optional[Any] = None

    def makeConnection(self, transport):
        pass

    def connectionMade(self):
        pass


@implementer(interfaces.IProtocol, interfaces.ILoggingContext)
class Protocol(BaseProtocol):
    factory: Optional[Factory] = None

    def logPrefix(self):
        pass

    def dataReceived(self, data: bytes):
        pass

    def connectionLost(self, reason: object = None):
        pass


__all__ = [
    "Factory",
    "Protocol",
]
